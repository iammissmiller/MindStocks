<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Safe Investing Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --bg:#f6f8fa; --navy:#0D1B2A; --accent:#E63946;
  --card:#fff; --muted:#556677; --soft:#f1faf8;
  --radius:12px; --shadow:0 10px 30px rgba(13,27,42,0.08);
  --transition:220ms cubic-bezier(.2,.9,.3,1);
}
/* --- existing CSS --- */
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--navy);display:flex;flex-direction:column;min-height:100vh;}
.header{background:linear-gradient(90deg,var(--navy),#123544);color:#fff;padding:28px 18px;width:100%;display:flex;align-items:center;gap:14px;}
.header img{width:50px;height:50px;border-radius:50%;background:white;padding:5px}
.header h1{font-size:1.6rem;font-weight:700}
.header p{margin-top:4px;color:rgba(255,255,255,0.9);font-size:.95rem}
.container{width:100%;flex:1;display:flex;justify-content:center;align-items:center;padding:20px;}
.inner{width:100%;max-width:900px;}
.start-screen,.quiz-card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:30px;text-align:center;}
.start-screen h2{font-size:1.4rem;margin-bottom:10px}
.start-screen p{font-size:1rem;color:var(--muted);margin-bottom:20px}
.start-btn{background:var(--navy);color:white;padding:12px 24px;border:none;border-radius:999px;font-weight:600;font-size:1rem;cursor:pointer;transition:background var(--transition);}
.start-btn:hover{background:var(--accent)}
.quiz-card h3{font-size:1.1rem;font-weight:600;margin-bottom:12px;text-align:left}
.options{margin-top:10px;text-align:left}
.options label{display:block;background:var(--soft);margin-bottom:8px;padding:10px;border-radius:8px;cursor:pointer;transition:background var(--transition);}
.options input{margin-right:8px}
.options label:hover{background:#e8f6f3}
.quiz-buttons{display:flex;gap:10px;margin-top:15px;flex-wrap:wrap;}
button{background:var(--navy);color:white;padding:10px 18px;border:none;border-radius:999px;font-weight:600;cursor:pointer;transition:background var(--transition);}
button:hover{background:var(--accent)}
button:disabled{background:#ccc;cursor:not-allowed}
.result{margin-top:30px;padding:30px;border-radius:var(--radius);background:#fff;text-align:center;box-shadow:0 8px 20px rgba(0,0,0,0.15);}
.score-counter{font-size:2rem;font-weight:700;margin-bottom:10px}
.message{font-size:1.2rem;margin-bottom:20px}
.progress-container{width:160px;height:160px;margin:20px auto;position:relative;}
.progress-container svg{transform:rotate(-90deg)}
.progress-container circle{fill:none;stroke-width:14;stroke-linecap:round;}
.progress-bg{stroke:#eee;}
.progress-bar{stroke:url(#scoreGradient);stroke-dasharray:440;stroke-dashoffset:440;transition:stroke-dashoffset 1s ease;}
.progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:1.2rem;font-weight:700;}
.review-container {margin-top: 25px;padding: 20px;background: #fff;border-radius: 12px;box-shadow: 0 6px 16px rgba(0,0,0,0.08);}
.review-container h3 {margin-bottom: 16px;font-size: 1.2rem;font-weight: 700;}
.review-item {padding: 12px;border-radius: 8px;margin-bottom: 12px;background: #f9fafb;border-left: 6px solid #d1d5db;}
.review-item.correct { border-left-color: #16a34a; }
.review-item.wrong { border-left-color: #dc2626; }
.review-item h4 { font-size: 1rem; margin-bottom: 6px; }
.review-item p { margin: 3px 0; font-size: 0.95rem; }
.explanation { font-style: italic; color: #374151; }
footer{background:#111827;color:#fff;text-align:center;padding:16px;font-size:.9rem;width:100%;}
footer a{color:#93c5fd}
.btn-link {display:inline-block;text-decoration:none;background:var(--navy);color:#fff;padding:12px 24px;border-radius:999px;font-weight:600;font-size:1rem;transition:background var(--transition);text-align:center;}
.btn-link:hover { background:var(--accent); }
@media(max-width:600px){.btn-link { display:block;width:100%;margin-bottom:10px; }}
@media(max-width:1023px){.header{flex-direction:column;text-align:center}.header img{margin-bottom:10px}.quiz-buttons{justify-content:center}}
@media(max-width:600px){.header h1{font-size:1.3rem}.header p{font-size:.85rem}.start-screen,.quiz-card{padding:20px}.quiz-card h3{font-size:1rem}button,.start-btn{width:100%;padding:12px}}
</style>
</head>
<body>

<div class="header">
  <img src="https://cdn-icons-png.flaticon.com/512/2331/2331947.png" alt="Quiz">
  <div>
    <h1>Safe Investing Quiz</h1>
    <p>Test your knowledge on essential safe investing practices.</p>
  </div>
</div>

<div class="container" id="start-screen">
  <div class="inner">
    <div class="start-screen">
      <h2>Welcome to the Safe Investing Quiz</h2>
      <p>Click the button below to begin your quiz and test your knowledge.</p>
      <button class="start-btn" onclick="startQuiz()">Start Quiz</button>
    </div>
  </div>
</div>

<div class="container" id="quiz-container" style="display:none;">
  <div class="inner" id="quiz-inner"></div>
</div>

<div class="container" id="quiz-controls" style="display:none;">
  <div class="inner">
    <div class="quiz-buttons">
      <button id="prev-btn" onclick="prevQuestion()">Previous</button>
      <button id="next-btn" onclick="nextQuestion()">Next</button>
    </div>
    <div id="result" style="display:none;"></div>
  </div>
</div>

<footer>
  ¬© 2025 MindStocks | Built for SEBI Hackathon |
  <a href="https://mail.google.com/mail/?view=cm&fs=1&to=sebi@sebi.gov.in" target="_blank">Contact Us</a>
</footer>

<script>
const quizData = [
  {question:"Which of the following is a primary benefit of diversifying your portfolio?",options:["Maximizing short-term gains","Reducing risk by spreading investments","Avoiding all taxes","Guaranteeing high returns"],answer:1,explanation:"Diversification reduces risk by spreading investments across different assets."},
  {question:"Before investing in a company or fund, what is the most important first step?",options:["Investing quickly to not miss opportunities","Understanding how it works and the risks involved","Only checking its past one-month performance","Asking friends for recommendations"],answer:1,explanation:"You should always understand how an investment works and its risks before investing."},
  {question:"What is the recommended size of an emergency fund?",options:["1 month of expenses","3‚Äì6 months of living expenses","1 year of income","‚Çπ1 lakh fixed amount"],answer:1,explanation:"Experts recommend 3‚Äì6 months of living expenses as an emergency fund."},
  {question:"Which practice can help avoid emotional investing mistakes?",options:["Following media hype about ‚Äúhot‚Äù stocks","Making quick decisions to lock profits","Sticking to a predefined investment plan","Checking portfolio every hour"],answer:2,explanation:"Sticking to a predefined plan helps avoid emotional investing mistakes."},
  {question:"How often should you ideally review your investments?",options:["Daily","Weekly","Quarterly or annually","Only when markets crash"],answer:2,explanation:"Reviewing quarterly or annually helps you stay on track without overreacting."},
  {question:"Which of the following is considered a common investment mistake?",options:["Keeping an emergency fund","Following unverified social media tips","Using SIPs for disciplined investing","Setting stop-loss limits"],answer:1,explanation:"Following unverified social media tips is risky and a common mistake."}
];

let currentQuestion = 0, score = 0, answers = [];

// Shuffle function
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function startQuiz(){
  // Shuffle questions
  shuffleArray(quizData);
  // Shuffle options for each question
  quizData.forEach(q => {
    const correctAnswer = q.options[q.answer];
    shuffleArray(q.options);
    q.answer = q.options.indexOf(correctAnswer);
  });

  answers = new Array(quizData.length).fill(null);
  currentQuestion=0; score=0;
  document.getElementById("start-screen").style.display="none";
  document.getElementById("quiz-container").style.display="flex";
  document.getElementById("quiz-controls").style.display="flex";
  loadQuestion();
}

// --- rest of JS remains mostly the same ---
function loadQuestion(){
  const quizInner=document.getElementById("quiz-inner");
  quizInner.innerHTML="";
  const q=quizData[currentQuestion];
  const card=document.createElement("div");
  card.className="quiz-card";
  card.innerHTML=`
    <h3>Q${currentQuestion+1} of ${quizData.length}. ${q.question}</h3>
    <div class="options">
      ${q.options.map((opt,i)=>`
        <label data-option="${i}">
          <input type="radio" name="q${currentQuestion}" value="${i}" ${answers[currentQuestion]===i?'checked':''}> ${opt}
        </label>`).join("")}
    </div>`;
  quizInner.appendChild(card);
  document.getElementById("prev-btn").disabled=currentQuestion===0;
  document.getElementById("next-btn").textContent=currentQuestion===quizData.length-1?"Submit Quiz":"Next";
}

function nextQuestion(){
  const selected=document.querySelector(`input[name="q${currentQuestion}"]:checked`);
  if(!selected){alert("Please select an answer before continuing.");return;}
  const selectedValue=parseInt(selected.value,10);
  answers[currentQuestion]=selectedValue;
  if(currentQuestion<quizData.length-1){currentQuestion++;loadQuestion();}
  else{showResult();}
}

function prevQuestion(){
  if(currentQuestion>0){currentQuestion--;loadQuestion();}
}

function animateCounter(el,target){
  let count=0;
  const step=Math.ceil(target/50);
  const interval=setInterval(()=>{
    count+=step;
    if(count>=target){count=target;clearInterval(interval);}
    el.textContent=count;
  },30);
}

function animateProgress(percent){
  const circle=document.querySelector(".progress-bar");
  const radius=70;
  const circumference=2*Math.PI*radius;
  circle.style.strokeDasharray=circumference;
  circle.style.strokeDashoffset=circumference;
  setTimeout(()=>{
    circle.style.strokeDashoffset=circumference-(percent/100)*circumference;
  },100);
}

function showResult(){
  score = answers.reduce((acc,ans,i) => 
    ans === quiz[i].answer ? acc+1 : acc, 0
  );
  
  document.getElementById("quiz-container").style.display="none";
  document.getElementById("prev-btn").style.display="none";
  document.getElementById("next-btn").style.display="none";

  const resultDiv=document.getElementById("result");
  resultDiv.style.display="block";

  const percent=Math.round((score/quiz.length)*100);
  let message="üòï Needs Improvement. Keep practicing!";
  if(score===quiz.length) message="üéâ Perfect Score! Excellent job!";
  else if(score>=quiz.length/2) message="üôÇ Good work! You're learning well.";

  resultDiv.innerHTML=`
    <div class="progress-container">
      <svg width="160" height="160">
        <defs>
          <linearGradient id="scoreGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" stop-color="#ef4444"/>  
            <stop offset="50%" stop-color="#facc15"/> 
            <stop offset="100%" stop-color="#22c55e"/> 
          </linearGradient>
        </defs>
        <circle class="progress-bg" cx="80" cy="80" r="70"></circle>
        <circle class="progress-bar" cx="80" cy="80" r="70" stroke="url(#scoreGradient)"></circle>
      </svg>
      <div class="progress-text">${percent}%</div>
    </div>

    <div class="score-counter"><span id="score-count">0</span> / ${quizData.length}</div>
    <div class="message">${message}</div>

    <div class="review-container">
      <h3>üìë Review Your Answers</h3>
      ${quizData.map((q,i)=>{
        const chosen=answers[i];
        const correct=q.answer;
        const isCorrect = chosen===correct;
        return `
          <div class="review-item ${isCorrect ? "correct" : "wrong"}">
            <h4>Q${i+1}. ${q.question}</h4>
            <p><strong>Your answer:</strong> ${q.options[chosen] || "Not answered"}</p>
            <p><strong>Correct answer:</strong> ${q.options[correct]}</p>
            <p class="explanation">${q.explanation}</p>
          </div>
        `;
      }).join("")}
    </div>

    <div class="quiz-buttons" style="justify-content:center; margin-top:20px;">
      <a href="quiz4.html" class="btn-link">üîÑ Retake Quiz</a>
      <a href="quiz5.html" class="btn-link">‚û°Ô∏è Next Quiz</a>
    </div>
  `;

  animateCounter(document.getElementById("score-count"),score);
  animateProgress(percent);
}
</script>

</body>
</html>
